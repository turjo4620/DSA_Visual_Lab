<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Accordion?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="rootPane" prefHeight="800.0" prefWidth="1280.0"
            style="-fx-background-color: #0F172A;"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.dsa_visual_lab.controller.linear.ArrayController">

    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="70.0" spacing="20.0" style="-fx-border-color: #334155; -fx-border-width: 0 0 1 0; -fx-padding: 0 20;">
            <Button onAction="#onBackClick" text="← Back"
                    style="-fx-background-color: transparent; -fx-text-fill: #94A3B8; -fx-font-size: 14px; -fx-cursor: hand; -fx-border-color: #94A3B8; -fx-border-radius: 5;"/>

            <Label text="Dynamic Array Visualization" textFill="#38BDF8">
                <font><Font name="System Bold" size="24.0" /></font>
                <style>-fx-effect: dropshadow(three-pass-box, rgba(56, 189, 248, 0.3), 10, 0, 0, 0);</style>
            </Label>
        </HBox>
    </top>

    <center>
        <HBox spacing="15" style="-fx-padding: 15;">

            <VBox prefWidth="280.0" spacing="10" style="-fx-background-color: #1E293B; -fx-background-radius: 10; -fx-padding: 10;">
                <Label text="Controls" textFill="#94A3B8" style="-fx-font-weight: bold;"/>

                <Accordion expandedPane="$paneModify">
                    <panes>
                        <TitledPane fx:id="paneModify" text="Modify Array" animated="true" style="-fx-text-fill: #E2E8F0;">
                            <VBox spacing="10.0" style="-fx-background-color: #0F172A; -fx-padding: 10;">
                                <TextField fx:id="insertValueField" promptText="Value" style="-fx-background-color: #1E293B; -fx-text-fill: white; -fx-border-color: #475569; -fx-border-radius: 5;"/>
                                <Label fx:id="lblErrValue" text="⚠ Invalid Value" textFill="#F87171" visible="false" managed="false"/>

                                <TextField fx:id="insertIndexField" promptText="Index (Optional)" style="-fx-background-color: #1E293B; -fx-text-fill: white; -fx-border-color: #475569; -fx-border-radius: 5;"/>
                                <Label fx:id="lblErrIndex" text="⚠ Invalid Index" textFill="#F87171" visible="false" managed="false"/>

                                <Button text="Append" maxWidth="Infinity" onAction="#btnAppend"
                                        style="-fx-background-color: #34D399; -fx-text-fill: #0F172A; -fx-font-weight: bold; -fx-background-radius: 5; -fx-cursor: hand;"/>

                                <Button text="Insert at Index" maxWidth="Infinity" onAction="#btnInsertAtIndex"
                                        style="-fx-background-color: transparent; -fx-text-fill: #34D399; -fx-border-color: #34D399; -fx-border-radius: 5; -fx-cursor: hand;"/>

                                <Region prefHeight="10"/>

                                <HBox spacing="5">
                                    <Button text="Remove Last" HBox.hgrow="ALWAYS" maxWidth="Infinity" onAction="#btnRemoveLast"
                                            style="-fx-background-color: transparent; -fx-text-fill: #F87171; -fx-border-color: #F87171; -fx-border-radius: 5; -fx-cursor: hand;"/>
                                    <Button text="Remove Idx" HBox.hgrow="ALWAYS" maxWidth="Infinity" onAction="#btnRemoveAtIndex"
                                            style="-fx-background-color: transparent; -fx-text-fill: #F87171; -fx-border-color: #F87171; -fx-border-radius: 5; -fx-cursor: hand;"/>
                                </HBox>
                            </VBox>
                        </TitledPane>

                        <TitledPane text="Operations" animated="true">
                            <VBox spacing="10.0" style="-fx-background-color: #0F172A; -fx-padding: 10;">
                                <TextField fx:id="searchValField" promptText="Search Value" style="-fx-background-color: #1E293B; -fx-text-fill: white; -fx-border-color: #475569;"/>
                                <Button text="Linear Search" maxWidth="Infinity" onAction="#btnLinearSearch" style="-fx-background-color: #1E293B; -fx-text-fill: white; -fx-border-color: #64748B; -fx-border-radius: 5;"/>
                                <Button text="Find Max / Min" maxWidth="Infinity" onAction="#btnFindMax" style="-fx-background-color: #1E293B; -fx-text-fill: white; -fx-border-color: #64748B; -fx-border-radius: 5;"/>
                            </VBox>
                        </TitledPane>

                        <TitledPane text="Configuration" animated="true">
                            <VBox spacing="10.0" style="-fx-background-color: #0F172A; -fx-padding: 10;">
                                <Label text="Initial Capacity" textFill="#94A3B8"/>
                                <TextField fx:id="capacityField" text="8" style="-fx-background-color: #1E293B; -fx-text-fill: white; -fx-border-color: #475569;"/>
                                <Button text="Reset Array" maxWidth="Infinity" onAction="#btnCreateArray" style="-fx-background-color: #60A5FA; -fx-text-fill: #0F172A; -fx-font-weight: bold;"/>
                            </VBox>
                        </TitledPane>
                    </panes>
                </Accordion>
            </VBox>

            <VBox HBox.hgrow="ALWAYS" alignment="TOP_CENTER" spacing="20.0" style="-fx-background-color: #0B1120;">
                <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>

                <VBox spacing="5" maxWidth="600">
                    <HBox>
                        <Label fx:id="lblSizeCap" text="Size: 0 / Capacity: 8" textFill="#94A3B8"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="statusLabel" text="Ready" textFill="#34D399"/>
                    </HBox>
                    <ProgressBar fx:id="capacityBar" progress="0.0" maxWidth="Infinity" prefHeight="10" style="-fx-accent: #38BDF8; -fx-control-inner-background: #1E293B; -fx-text-box-border: transparent;"/>
                </VBox>

                <Pane fx:id="visualPane" VBox.vgrow="ALWAYS" style="-fx-border-color: #334155; -fx-border-width: 2; -fx-border-radius: 10; -fx-background-color: #1E293B; -fx-background-radius: 10;" />

                <HBox alignment="CENTER" spacing="15">
                    <Label text="Speed:" textFill="#94A3B8"/>
                    <Slider fx:id="speedSlider" min="10" max="100" value="50" prefWidth="200"/>
                </HBox>
            </VBox>

            <VBox prefWidth="300.0" style="-fx-background-color: #1E293B; -fx-background-radius: 10; -fx-padding: 10;">
                <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
                    <tabs>
                        <Tab text="Pseudocode" style="-fx-background-color: #0F172A; -fx-text-base-color: white;">
                            <ListView fx:id="pseudoCodeList" style="-fx-background-color: #0F172A; -fx-control-inner-background: #0F172A;"/>
                        </Tab>
                        <Tab text="Log" style="-fx-background-color: #0F172A; -fx-text-base-color: white;">
                            <ListView fx:id="messageLogList" style="-fx-background-color: #0F172A; -fx-control-inner-background: #0F172A;"/>
                        </Tab>
                        <Tab text="Help" style="-fx-background-color: #0F172A; -fx-text-base-color: white;">
                            <TextArea fx:id="explanationArea" editable="false" wrapText="true"
                                      text="Select an action from the left panel."
                                      style="-fx-control-inner-background: #0F172A; -fx-text-fill: #CBD5E1;"/>
                        </Tab>
                    </tabs>
                </TabPane>
            </VBox>

        </HBox>
    </center>
</BorderPane>